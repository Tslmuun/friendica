# 设置

* [首页](help)

如果你是一个 Friendica 节点的管理员，你可以访问 **管理面板**，在那里你可以配置你的 Friendica 节点。

## 概览

在管理员面板的主页上，你会看到关于你的节点的信息概览。

### 队列

显示的三个数字分别是：
- 重试队列：这些出站消息无法被远程主机接收，将在 30 天后在更长时间间隔内重新发送，然后在被删除之前被完全放弃。
- 延迟队列：这些内部任务失败并且将尝试最多 14 次重新执行。
- 任务队列：这些内部任务将排队等待在下一次后台工作人员运行期间执行。

### 其他信息

然后你会看到你的节点上所有账户的概述，可以在面板的 "用户" 部分进行管理。
以及当前活动插件的概述。
该列表是链接的，因此你可以快速访问插件设置。
最后你会被告知你安装的 Friendica 版本。
如果你联系开发者来反馈 bug 或问题，请同时提供你的节点版本。

管理员面板分为从面板侧栏可访问的子部分。

## 网站

管理员面板的这个部分包含了你的 Friendica 节点的主要配置。
它被分成了几个子部分，从页面顶部的基本设置开始，逐渐向下发展。

大多数配置选项在管理员面板中都有帮助文本。
因此，本文档还未涵盖所有选项。

### 基本设置

#### Banner/Logo

设置网站横幅的内容。
默认标志是Friendica的标志和名称。
您可能希望提供HTML/CSS来样式化和/或定位此内容，因为它可能默认情况下不受主题支持。

#### 语言

此选项将设置节点的默认语言。
如果Friendica无法识别访问者的偏好设置，则会使用它作为备用设置，并且可以被用户设置覆盖。

Friendica社区提供了一些翻译。
有些比其他更完整。
有关翻译过程的更多信息，请参见[此帮助页面](/help/translations)。

### 系统主题

选择一个主题作为系统的默认主题。用户个人资料可以覆盖系统默认主题。当前默认主题是`vier`。

你可能还想为移动界面设置一个特殊的主题。这取决于你选择的桌面主题是否适合移动设备。例如，`vier`主题是适合移动设备的。

### 注册

#### 注册政策

通过此下拉菜单选择节点注册政策。你可以选择以下模式之一：

* **开放**: 任何人都可以注册新帐户并立即开始使用。
* **需要批准**: 任何人都可以注册新帐户，但管理员必须在其可用之前批准它。
* **关闭**: 不允许新的注册。

##### 基于邀请码的注册

除了管理面板中的设置之外，你还可以决定是否仅可以使用邀请码进行注册。要启用基于邀请码的注册，你必须在[config/local.config.php](/help/Config)文件的`system`部分中将`invitation_only`设置为`true`。如果要使用此方法，则注册政策必须设置为“开放”或“需要批准”。

#### 检查全名

你可能会发现有很多垃圾邮件发送者试图在你的网站上注册。在测试过程中，我们发现由于这些注册是自动完成的，因此“全名”字段通常仅设置为帐户名，名字和姓氏之间没有空格。如果你想支持只有一个名称作为全名的人，请将此设置更改为true。默认值是false。

#### OpenID

默认情况下，OpenID 可用于注册和登录。如果你不希望在系统上提供 OpenID 设施，请将“no_openid”设置为 true。默认值为false。

### 多次注册

创建“页面”的功能需要人们注册多次。网站配置可以阻止注册（或要求批准注册）。默认情况下，已登录的用户可以注册其他帐户以用作页面。如果注册政策设置为“需要批准”，则仍需要批准这些帐户。你可以通过将“阻止多次注册”设置为true来禁止已登录的用户创建其他帐户。默认值为false。

### 文件上传

#### 文件存储后端

设置Friendica用于存储上传文件数据的后端。Friendica有两种可用的存储后端：

- **数据库**：数据存储在专用的数据库表中（`storage`）。
- **文件系统**：数据保存为文件在文件系统中。

更多的存储后端可以从第三方插件中获得。如果你使用这些插件，请参考其中的文档获取更多信息。

默认值为“Database (legacy)”，这是一种直接将数据存储在数据库中的传统方式。

现有的数据可以使用“[存储迁移](/help/tools)”控制台命令移动到当前的活动后端。

如果所选的后端具有可配置的选项，则会在此处显示新字段。

##### 文件系统：存储基本路径

文件系统存储后端保存数据的基本路径。

为了最大程度的安全性，此路径应该在Web服务器提供的文件夹树之外：这样可以通过绕过隐私检查来防止文件下载。

默认值为`storage`，即Friendica代码根文件夹中的`storage`文件夹。


#### 最大图像大小
上传图像的最大字节数。默认设置为0，表示没有限制。

### 策略 

####全局目录

这个配置了更新全局目录的URL，并在默认配置中提供。未记录的部分是，如果没有设置此项，则全局目录对应用程序完全不可用。这使得私人社区完全与全局网络隔离开来。

强制发布
默认情况下，每个用户可以在其设置页面上选择是否将其个人资料发布在站点目录中。此设置强制在此站点上列出所有个人资料，并且没有向用户提供更改此设置的选项。默认值为false。

#### 阻止公共访问

设置为true以阻止所有否则公共的个人页面在未登录时对此站点的所有人员进行访问。这会阻止未经授权的人员查看个人资料、朋友、照片、站点目录和搜索页面。副作用是，此站点的条目不会出现在全局目录中。我们建议特别禁用它（设置在本页的其他地方进行描述）。注意：这是专门针对希望成为“独立”的站点，并且不希望连接到任何其他Friendica站点的站点。未经授权的人员也将无法请求与站点成员建立友谊。默认值为false。在2.2或更高版本中可用。


#### 访客的社区页面

社区页面显示所有公共帖子，分为本地或整个网络的来源。通过此设置，您可以选择向Friendica节点的访问者显示哪些社区页面。您的本地用户将始终可以访问这两个页面。

注意：一些设置，如用户隐藏其联系人以使其不对公众显示，将防止帖子出现在全局社区页面上。

允许的友好域
允许与此站点建立友谊的域名的逗号分隔列表。接受通配符。默认情况下，任何（有效）域都可以与此站点建立友谊。

如果您想为教育群体、合作社和类似社区建立封闭网络，并且不想与网络的其他部分进行通信，则此设置很有用

#### 允许的电子邮件域名

这是一个逗号分隔的列表，包含允许在此站点进行注册的电子邮件地址的域名。这将阻止非组织成员在此处进行注册。通配符是可以接受的。默认情况下，任何（有效的）电子邮件地址都允许在注册时使用。

#### 允许用户设置远程身份

如果您启用了“允许用户设置远程身份”选项，用户可以在联系人设置中选择Atom源，作为他们的“远程身份”。这意味着，远程身份发布的帖子将自动由Friendica代表他们转发。

此功能可用于让用户将博客帖子等内容镜像到他们的Friendica帖子中。默认情况下，该功能已被禁用，因为它会增加服务器的负载，并可能被滥用来分发垃圾邮件。

作为节点管理员，您也可以直接在数据库中设置此标志。在这样做之前，请确保您知道自己在做什么，并备份数据库。

#### 明确的内容

如果您运行的节点存在明确的内容，则可以使用此选项进行公告。启用此选项后，有关您的节点的发布信息中将设置一个信息标记。（如果启用了“发布服务器信息”标志）

此外，在新用户的注册页面上将显示一条说明。

### 高级选项

#### 代理配置设置

如果您的站点使用代理连接互联网，您可以使用这些设置来与外界进行通信。外界仍然需要能够看到您的网站，否则这并不是非常有用。

#### 网络超时

在网络通信超时之前等待的时间长度。该值以秒为单位。默认值为60秒。将其设置为0表示无限制（不建议）。

#### 验证SSL证书

默认情况下，Friendica允许使用“自签名”SSL证书的网站之间进行SSL通信。为了与浏览器和其他网络具有最广泛的兼容性，我们不建议使用自签名证书，但我们不会阻止您使用它们。SSL加密了网站之间（以及与您的浏览器之间）传输的所有数据。这使您可以拥有完全加密的通信，并保护您的登录会话免受劫持攻击。可以免费生成自签名证书，而不必花费大量资金购买网站SSL证书。然而，在安全界中，它们并没有得到好评，因为它们可能会受到所谓的“中间人”攻击。如果您愿意，可以打开严格的证书检查。这意味着您无法连接（完全不行）到具有自签名SSL站点的网站。

### 检查上游版本

如果启用了此选项，则您的 Friendica 节点将每天从 github 存储库检查一次上游版本。
您可以选择检查稳定版或开发版。
如果发布了新版本，您将在管理面板摘要页面中收到通知。

### 自动发现联系人目录

### 性能

### Worker

该部分允许您配置由安装期间创建的 `cron` 作业触发的后台进程。
该进程在创建新任务的工作程序之前会检查可用的系统资源。
因此，可能会发生您允许的最大工作程序数不会达到的情况。

后台进程的任务具有优先级。
为了确保即使系统有很多工作要做也执行重要任务，启用 *fastlane* 很有用。

### 转移

## 用户

此面板部分允许管理员控制在节点上注册的用户。

如果在常规节点配置中选择了“需要批准”的*注册策略*，则新的注册将列在页面顶部。
管理员可以在此处批准或拒绝请求。

在新注册块下面，当前 Friendica 节点上的账户会被列出。
您可以通过姓名、电子邮件、注册日期、上次登录日期、上次发布日期和账户类型对用户列表进行排序。
在此，管理员还可以阻止/解除用户访问节点或完全删除帐户。

在页面的最后一个部分，管理员可以在节点上创建新帐户。
新账户的密码将发送到所选的电子邮件地址。

## 插件

此页面用于选择和配置 Friendica 的扩展，这些扩展必须放置在 Friendica 安装的 `/addon` 子目录中。
您将看到可用插件的一个长列表。
每个插件的名称都链接到一个独立的页面，提供有关该插件的更多信息和配置可能性。
还显示了插件的版本以及指示符，以表明插件当前是否处于活动状态。

当您更新您的节点和插件时，它们可能需要重新加载。
为了简化此过程，在页面顶部有一个按钮以重新加载所有活动插件。

## 主题

管理员界面的主题部分类似于插件部分，但可以控制 Friendica 节点上的主题。
每个主题都有一个专用的子页面，显示当前状态、有关主题的一些信息以及使用主题的 Friendica 界面的屏幕截图。
如果主题提供特殊设置，管理员可以在此处设置全局默认值。

您可以在它们的专用子页面上激活和停用主题，从而使它们可用于节点的用户。
要为 Friendica 节点选择默认主题，请参阅管理员面板中的“站点”部分。

## 附加功能

Friendica 中有几个可选功能，比如“不喜欢”按钮。
在管理员面板的此部分，您可以选择节点的默认设置，并可能修复它，以便用户无法更改该设置。

## 数据库更新

如果 Friendica 的数据库结构发生变化，它会自动应用这些更改。
如果您怀疑更新可能没有成功，可以使用管理员面板的此部分来检查情况。

## 检查队列

在管理员面板摘要中，消息队列有两个数字。
第二个数字表示未能传递并排队等待重试的消息。
如果这个数字飞涨，您可能会问自己哪个收件人没有收到。

在检查队列部分的管理员面板后面，您会发现无法传递的消息列表。
列表按收件人名称排序，因此可以简单地识别潜在的通信故障线路。
这些线路可能因各种原因而中断。
接收端可能脱机，系统负载可能很高等等。

不要慌张！
Friendica 不会永远排队消息，而是在一段时间后自动筛选出“死”节点，然后从队列中删除消息。

## 服务器阻止列表

该页面允许阻止与特定域名的所有通信（入站和出站）。
每个被阻止的域条目都需要一个显示在 [friendica](/friendica) 页面上的原因。
匹配是精确的，阻止一个域不会阻止子域。

## 联邦统计

联邦统计页面为您提供了去中心化社交网络联邦中您的节点所知道的节点/服务器/pod的简短摘要。
这些数字并不完整，只包含 Friendica 直接联邦的网络中的节点。

## 删除项目

使用此页面，管理员可以从其 Friendica 节点中删除发帖和可能的关联讨论线程。
要这样做，他们需要知道帖子的 GUID。
这可以在帖子的 `/display` 页面上找到，它是浏览器导航栏中显示的 URL 的最后一部分。
您可以通过跟随“链接到源”来到达 `/display` 页面。

## 插件功能

您可以为Friendica节点安装一些插件，这些插件的某些设置必须由管理员设置。
所有这些插件都将在管理面板侧边栏的此区域中列出其名称。

## 日志

管理面板的日志部分分为两个页面。
在“日志”链接后的第一个页面上，您可以配置Friendica记录多少。
在第二个页面上，您可以查看日志。

您不应将日志放置在任何从Web可访问的目录中。
如果您必须这样做，并且您正在使用Apache的默认配置，则应为日志文件选择以``.log``或``.out``结尾的名称。
如果使用其他Web服务器，请确保已经设置了正确的访问规则，以使您的日志文件无法访问。

有五个不同的日志级别：正常、跟踪、调试、数据和全部。
指定了写入日志文件的信息和数据的不同详细程度。
通常您不需要记录任何内容。
*DEBUG*级别将显示系统活动的大量信息，但不包括详细数据。
在*ALL*级别中，Friendica将将所有内容记录到文件中。
但由于信息量大，我们建议仅在跟踪特定问题时启用此功能。

**数据量可能会快速增加日志文件的文件大小**。
您应该设置某种日志轮换，以防止日志文件变得过大。

**已知问题**：文件名``friendica.log``可能会导致问题，具体取决于您的服务器配置（参见[issue 2209](https://github.com/friendica/friendica/issues/2209)）。

默认情况下，PHP警告和错误消息被抑制。
如果要启用这些功能，则必须在``config/local.config.php``文件中激活它们。
使用以下设置将PHP错误重定向到文件中。

Config:

	error_reporting(E_ERROR | E_WARNING | E_PARSE );
	ini_set('error_log','php.out');
	ini_set('log_errors','1');
	ini_set('display_errors', '0');

这将把所有 PHP 错误记录在文件 php.out 中（该文件必须可被 Web 服务器写入）。程序中偶尔会引用未声明的变量，因此我们不建议使用 `E_NOTICE` 或 `E_ALL`。在这些级别报告的问题中，绝大部分都是无害的。请按照上述推荐设置将遇到的任何错误报告给开发人员。它们通常表示需要解决的问题。

如果在使用应用程序时遇到空白（白色）页面，查看 PHP 日志 - 因为这几乎总是表示发生了错误。

## 诊断

在管理面板的此部分中，您将找到两个工具，用于调查 Friendica 针对某些资源所见的情况。这些工具可帮助澄清通信问题。

对于 “探测地址”，Friendica 将显示提供的地址的信息。

通过第二个工具 “检查 WebFinger”，您可以请求有关由 WebFinger（`someone@example.com`）标识的对象的信息。

# 例外规则

有四个例外规则，即所有配置都将从数据库中读取。这些是数据库设置、管理员帐户设置、PHP 路径以及节点在（子）域的子目录中可能存在的安装信息。

## 数据库设置

使用以下设置指定 Friendica 使用的数据库服务器、用户名和密码以及要使用的数据库。

	'database' => [
		'hostname' => 'localhost',
		'username' => 'mysqlusername',
		'password' => 'mysqlpassword',
		'database' => 'mysqldatabasename',
		'charset' => 'utf8mb4',
	],

## 管理员用户

您可以将一个或多个帐户设置为“管理员”。
默认情况下，这将是您在安装过程中创建的帐户之一。
但是，您可以通过添加任何已使用的电子邮件地址来扩展电子邮件地址列表。
不可能使用已列出的电子邮件地址注册新帐户。

	'config' => [
		'admin_email' => 'you@example.com, buddy@example.com',
	],

## PHP Path

Friendica 的一些进程正在后台运行。
为此，您需要指定要使用的 PHP 二进制文件的路径。

	'config' => [
		'php_path' => '/usr/bin/php',
	],

## 子目录配置

可以将Friendica安装在Web服务器的子目录中。
我们强烈不建议这样做，因为这会破坏与其他网络（例如Diaspora、GNU Social、Hubzilla）的联邦关系。
例如，如果您有一个名为tests的子目录，并将Friendica安装在更深层次的子目录中，则配置将如下所示：

	'system' => [
		'urlpath' => 'tests/friendica',
	],

## 其他例外情况

此外，还有一些实验性设置，您可以在文档的[仅可在config/local.config.php中设置的配置值](help/Config)部分中了解。
